export { createLogger } from './core.mjs';
import { appender } from './global-appender.mjs';

if (!appender()) {
    const [{ asciiPrefixes, colors, unicodePrefixes, tagFactory }, { createConsoleAppender }, { createFormatter, terminalSupportsUnicode }, { filterMessages }] = await Promise.all([
        import('./default-formatting.mjs'),
        import('./console-appender.mjs'),
        import('./format-utils.mjs'),
        import('./appender-utils.mjs')
    ]);
    const formatter = createFormatter(colors, terminalSupportsUnicode() ? unicodePrefixes : asciiPrefixes, tagFactory);
    let minLogLevel = 1 /* LogLevel.info */;
    appender(filterMessages((message) => message.loglevel >= minLogLevel, createConsoleAppender(formatter), // eslint-disable-line indent
    { setMinLevel(logLevel) { minLogLevel = logLevel; } } // eslint-disable-line indent
    ));
}

export { appender };
