'use strict';

const createFormatter = (colors, prefixes, tagFactory) => {
    return ({ loglevel, message, context, action, tag }, usePrefix, identation = 0) => {
        const prefix = usePrefix === true ? (`${prefixes[loglevel]} `) : (typeof usePrefix === 'string' ? (`${usePrefix} `) : '');
        const color = colors[loglevel];
        const text = `${prefix}${loglevel === 0 /* LogLevel.verbose */ && action === 3 /* Action.log */ && tag !== undefined ? tagFactory(tag) + ' ' : ''}${message}${context != null ? ' ' + context : ''}`;
        return `${' '.repeat(identation)}${color ? color(text) : text}`;
    };
};
// from dreidels/utils
const terminalSupportsUnicode = () => {
    // The default command prompt and powershell in Windows do not support Unicode characters.
    // However, the VSCode integrated terminal and the Windows Terminal both do.
    return process.platform !== 'win32'
        || process.env.TERM_PROGRAM === 'vscode'
        || !!process.env.WT_SESSION;
};

exports.createFormatter = createFormatter;
exports.terminalSupportsUnicode = terminalSupportsUnicode;
